{"ast":null,"code":"import axios from \"axios\";\nconst API = process.env.REACT_APP_API_URL;\nexport const register = data => async dispatch => {\n  try {\n    dispatch({\n      type: \"AUTH_START\"\n    });\n    const res = await axios.post(`${API}/register`, data);\n    localStorage.setItem(\"token\", res.data.token);\n    const me = await axios.get(`${API}/me`, {\n      headers: {\n        Authorization: `Bearer ${res.data.token}`\n      }\n    });\n    dispatch({\n      type: \"AUTH_SUCCESS\",\n      payload: {\n        token: res.data.token,\n        user: me.data\n      }\n    });\n  } catch (e) {\n    dispatch({\n      type: \"AUTH_ERROR\",\n      payload: \"Register error\"\n    });\n  }\n};\nexport const login = (email, password) => async dispatch => {\n  try {\n    dispatch({\n      type: \"AUTH_START\"\n    });\n    const res = await axios.post(`${API}/login`, {\n      email,\n      password\n    });\n    localStorage.setItem(\"token\", res.data.token);\n    const me = await axios.get(`${API}/me`, {\n      headers: {\n        Authorization: `Bearer ${res.data.token}`\n      }\n    });\n    dispatch({\n      type: \"AUTH_SUCCESS\",\n      payload: {\n        token: res.data.token,\n        user: me.data\n      }\n    });\n  } catch {\n    dispatch({\n      type: \"AUTH_ERROR\",\n      payload: \"Login error\"\n    });\n  }\n};\nexport const getMe = () => async dispatch => {\n  const token = localStorage.getItem(\"token\");\n  if (!token) return;\n  try {\n    dispatch({\n      type: \"AUTH_START\"\n    });\n    const res = await axios.get(`${API}/me`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    dispatch({\n      type: \"AUTH_SUCCESS\",\n      payload: {\n        token,\n        user: res.data\n      }\n    });\n  } catch {\n    localStorage.removeItem(\"token\");\n    dispatch({\n      type: \"LOGOUT\"\n    });\n  }\n};\nexport const logout = () => {\n  localStorage.removeItem(\"token\");\n  return {\n    type: \"LOGOUT\"\n  };\n};","map":{"version":3,"names":["axios","API","process","env","REACT_APP_API_URL","register","data","dispatch","type","res","post","localStorage","setItem","token","me","get","headers","Authorization","payload","user","e","login","email","password","getMe","getItem","removeItem","logout"],"sources":["C:/react-projects/dating_site_app/frontend/src/redux/actions/authActions.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst API = process.env.REACT_APP_API_URL;\r\n\r\nexport const register = (data) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: \"AUTH_START\" });\r\n\r\n    const res = await axios.post(`${API}/register`, data);\r\n    localStorage.setItem(\"token\", res.data.token);\r\n\r\n    const me = await axios.get(`${API}/me`, {\r\n      headers: { Authorization: `Bearer ${res.data.token}` }\r\n    });\r\n\r\n    dispatch({\r\n      type: \"AUTH_SUCCESS\",\r\n      payload: { token: res.data.token, user: me.data }\r\n    });\r\n  } catch (e) {\r\n    dispatch({ type: \"AUTH_ERROR\", payload: \"Register error\" });\r\n  }\r\n};\r\n\r\nexport const login = (email, password) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: \"AUTH_START\" });\r\n\r\n    const res = await axios.post(`${API}/login`, { email, password });\r\n    localStorage.setItem(\"token\", res.data.token);\r\n\r\n    const me = await axios.get(`${API}/me`, {\r\n      headers: { Authorization: `Bearer ${res.data.token}` }\r\n    });\r\n\r\n    dispatch({\r\n      type: \"AUTH_SUCCESS\",\r\n      payload: { token: res.data.token, user: me.data }\r\n    });\r\n  } catch {\r\n    dispatch({ type: \"AUTH_ERROR\", payload: \"Login error\" });\r\n  }\r\n};\r\n\r\nexport const getMe = () => async (dispatch) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (!token) return;\r\n\r\n  try {\r\n    dispatch({ type: \"AUTH_START\" });\r\n\r\n    const res = await axios.get(`${API}/me`, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    });\r\n\r\n    dispatch({\r\n      type: \"AUTH_SUCCESS\",\r\n      payload: { token, user: res.data }\r\n    });\r\n  } catch {\r\n    localStorage.removeItem(\"token\");\r\n    dispatch({ type: \"LOGOUT\" });\r\n  }\r\n};\r\n\r\nexport const logout = () => {\r\n  localStorage.removeItem(\"token\");\r\n  return { type: \"LOGOUT\" };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}